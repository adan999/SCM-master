<!DOCTYPE html>
<html xmlns:th="http://www.w3.org/1999/xhtml">
<head><title>Mantenimiento Materiales</title>

    <link rel="stylesheet" type="text/css" href="css/bootstrap.min.css" th:href="@{/css/bootstrap.min.css}">
    <link rel="stylesheet" type="text/css" href="js/bootstrap.min.js" th:href="@{/js/bootstrap.min.js}">
    <link rel="stylesheet" type="text/css" href="/css/estilos.css" th:href="@{/css/estilos.css}">
    <link rel="stylesheet" href="css/bootstrap.css" th:href="@{/css/bootstrap.css}">
    <link rel="stylesheet" href="css/estilos.css" th:href="@{/css/estilos.css}">
    <link rel="stylesheet" href="css/style.css" th:href="@{/css/style.css}">
    <link rel="stylesheet" href="css/fonts.css" th:href="@{/css/fonts.css}">
</head>
<body>
<div class="jumbotron">


  <center><img src="/img/met.png" th:src="@{/img/met.png}" height="150px" width="150px"></center>
</div>
<!-- Menu -------------------------------------------------------------------------------------------------------->
<div class="site-wrap">
    <div th:replace="fragments.html :: menu"></div>
</div>
<br>
<br>
<br>
<br>


<script src="http://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js" type="text/javascript"></script>
<script>

    $(document).ready(function(){
        $("a.modificar").click(function(){

            var valores="";
            var separador ="{";



            // Obtenemos todos los valores contenidos en los <td> de la fila
            // seleccionada
            $(this).parents("tr").find("td").each(function(){
                valores+=$(this).html()+"{";
            });



            var arrayDeCadenas = valores.split(separador);

            var codigo = arrayDeCadenas[0];
            var nombre = arrayDeCadenas[1];
            $("#codigo").val(codigo);
            $("#nombre").val(nombre);


        });
    });
</script>
<div class="alert alert-success alert-dismissible fade show mensajeE" role="alert" th:classappend="'alert-' + (${clase != null} ? ${clase} : info)" th:if="${mensaje != null}">
    <strong th:text="${mensaje}">Texto</strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>
<div class="alert alert-success alert-dismissible fade show mensajeE" role="alert" th:classappend="'alert-' + (${clasex != null} ? ${clasex} : info)" th:if="${mensajex != null}">
    <strong th:text="${mensajex}">Texto</strong>
    <button type="button" class="close" data-dismiss="alert" aria-label="Close">
        <span aria-hidden="true">&times;</span>
    </button>
</div>

<center>

<div class="tituloMateriales">
<center> <h2>Materiales</h2></center>
</div>
</center>
<br>
<br>
<div class="container">
<div class="marcoMateriales">
 <div class="row">
    <div class="col">
<span class="float-right">
  
   <label for="inputPassword4">Buscar Clave: </label>
  <input type="text" id="txfolio">
  <button  class="btn btn-link"> <img src="/img/archivo.png"></button>
        </span>
     </div>
</div>

 <button type="button" class="btn btn-secondary btn-lg" data-toggle="modal" data-target="#exampleModalCenter"><img th:src="@{/img/bloc.png}" src="img/bloc.png" width="30px" height="30px"> </button>

<!--<button type="button" class="btn btn-secondary btn-lg" data-toggle="modal" data-target="#exampleModalCenter2"><img th:src="@{/img/lapiz.png}" src="img/lapiz.png" width="30px" height="30px"> </button>
     Ventana para Registrar Materiales -->

    <div class="alert alert-success alert-dismissible fade show mensajeE" role="alert" th:classappend="'alert-' + (${clasex != null} ? ${clasex} : info)" th:if="${mensajex != null}">
        <strong th:text="${mensajex}">Texto</strong>
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    <div class="modal fade" id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <form class="modal-content" th:action="@{/material/addMaterial}" method="post" th:object="${materiales}">

                <div class="modal-header text-center">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Registrar Materiales</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">
                    <div class="form-row justify-content-start">
                        <div class="form-group col-md-4">
                            <label>Clave Material:</label>
                            <input th:field="*{codigoMaterial}" type="text" class="form-control" required>
                        </div>
                        <div class="form-group col-md">
                            <label>Tipo Material:</label>
                            <select  th:field="*{idMaterialCat}" class="form-control2" required>
                                <option th:each="tipoMateriales : ${tipoMaterial}" th:value="${tipoMateriales.idMaterialCat}" th:text="${tipoMateriales.idMaterialCat+'-'+tipoMateriales.NomCategoria}"></option>
                            </select>
                        </div>
                    </div>
                    <div class="form-row justify-content-start">
                        <div class="form-row ">
                            <div class="form-group col-md">
                                <label>Material: </label>
                                <input type="text" class="form-control4" th:field="*{NomMaterial}" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-row ">
                        <div class="form-group col-md">
                            <label>Unidad:</label>
                            <input type="text" class="form-control5" field="*{UnidadMedida}" value="Kilogramos"  disabled="" >
                        </div>
                        <div class="form-group col-md-5">
                            <label>Cantidad Inicial:</label>
                            <input type="text" class="form-control5" th:field="*{CantidadActual}" required>
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="reset" class="btn btn-secondary btn-lg"><img th:src="@{/img/cruz.png}" src="/img/cruz.png"> Cancelar</button>
                    <button class="btn btn-secondary btn-lg"><img th:src="@{/img/guardar.png}" src="/img/guardar.png"> Realizar</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Fin Ventana Registrar Materiales -->



    <!-- Ventana para Modificar Materiales -->

    <div class="modal fade" id="exampleModalCenter2" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
        <div class="modal-dialog modal-lg modal-dialog-centered" role="document">
            <form class="modal-content" th:action="@{/material/modificarMaterial}" method="post" th:object="${materiales}">

                <div class="modal-header text-center">
                    <h5 class="modal-title" id="exampleModalCenterTitle">Modificar Materiales</h5>
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                        <span aria-hidden="true">&times;</span>
                    </button>
                </div>
                <div class="modal-body">

                    <div class="form-row justify-content-start">
                        <div class="form-group col-md-4">
                            <label>Clave:</label>
                            <input th:field="*{codigoMaterial}" type="text" class="form-control" id="codigo" readonly required>
                        </div>
                        <!--<button  class="btn btn-link2"> <img th:src="@{/img/archivo.png}" src="archivo.png"></button>
                            -->
                        <div class="form-group col-md">
                            <!--<label>Tipo Material:</label>
                            <select th:each="tipoMateriales: @{tipoMaterial}" class="form-control2">
                                <option th:value="@{tipoMaterial.NomMaterial}">Carton</option>
                            </select>-->
                        </div>
                    </div>
                    <div class="form-row justify-content-start">
                        <div class="form-row ">
                            <div class="form-group col-md">
                                <label>Material: </label>
                                <input type="text" class="form-control4" th:field="*{NomMaterial}" id="nombre" required>
                            </div>
                        </div>
                    </div>
                    <div class="form-row ">
                        <div class="form-group col-md">
                            <label>Unidad:</label>
                            <input type="text" class="form-control5" field="*{Unidad}" value="Kilogramos"  disabled="">
                        </div>
                        <!--<div class="form-group col-md-5">
                            <label>Cantidad Inicial:</label>
                            <input type="text" class="form-control5" readonly>
                        </div>-->
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="reset" class="btn btn-secondary btn-lg"><img th:src="@{/img/cruz.png}" src="/img/cruz.png"> Cancelar</button>
                    <button class="btn btn-secondary btn-lg"><img th:src="@{/img/guardar.png}" src="/img/guardar.png"> Modificar</button>
                </div>
            </form>
        </div>
    </div>
    <!-- Fin Ventana Modificar Materiales -->

    <br><br>
    <br><br>
    <div class="table-responsive">
        <table class="table table-striped table-hover">
            <thead>
            <tr>
                <th scope="col">Clave</th>
                <th scope="col">Material</th>
                <th scope="col">Tipo de Material</th>
                <th scope="col">Unidad de medida</th>
                <th scope="col">Cantidad Actual</th>
                <th scope="col">Modificar</th>
                <!-- <th scope="col">Clave Tipo de Material</th>-->
            </tr>
            </thead>
            <tbody>
            <tr th:each="materiales : ${material}">
                <td th:text="${materiales.codigoMaterial}"></td>
                <td th:text="${materiales.NomMaterial}"></td>
                <td th:text="${materiales.nomCategoria}"></td>
                <td th:text="${materiales.UnidadMedida}"></td>
                <td th:text="${materiales.CantidadActual}"></td>
                <td><a href="#" class = "modificar" data-toggle="modal" data-target="#exampleModalCenter2"><img th:src="@{/img/lapiz.png}" src="img/lapiz.png" width="30px" height="30px"></a></td>
                <!--<td th:text="${materiales.idMaterialCat}"></td>-->
            </tr>
            </tbody>
        </table>
    </div>
    <br>
</div>
    <br>
    <br>
<!--class="btn btn-link"-->
<script src="../static/js/jquery.js"  th:src="@{/js/jquery.js}" ></script>
<script src="../static/js/bootstrap.min.js"  th:src="@{/js/bootstrap.min.js}"></script>


</body>
</html>